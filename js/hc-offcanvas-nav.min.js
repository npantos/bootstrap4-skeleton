"use strict";!function($,window){const document=window.document,$html=$(document.getElementsByTagName("html")[0]),hasScrollBar=($(document),()=>document.documentElement.scrollHeight>document.documentElement.clientHeight),isIos=(()=>(/iPad|iPhone|iPod/.test(navigator.userAgent)||!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&!window.MSStream)(),isTouchDevice=(()=>"ontouchstart"in window||navigator.maxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch)(),isNumeric=n=>!isNaN(parseFloat(n))&&isFinite(n),ID=function(){return Math.random().toString(36).substr(2)+"-"+Math.random().toString(36).substr(2)},stopPropagation=e=>e.stopPropagation(),preventClick=cb=>e=>{e.preventDefault(),e.stopPropagation(),"function"==typeof cb&&cb()},getElementCssTag=el=>"string"==typeof el?el:el.attr("id")?"#"+el.attr("id"):el.attr("class")?el.prop("tagName").toLowerCase()+"."+el.attr("class").replace(/\s+/g,"."):getElementCssTag(el.parent())+" "+el.prop("tagName").toLowerCase(),insertAt=($insert,n,$parent)=>{const $children=$parent.children(),count=$children.length,i=n>-1?Math.max(0,Math.min(n-1,count)):Math.max(0,Math.min(count+n+1,count));0===i?$parent.prepend($insert):$children.eq(i-1).after($insert)},getAxis=position=>-1!==["left","right"].indexOf(position)?"x":"y",setTransform=(()=>{const transform=(prop=>{const prefixes=["Webkit","Moz","Ms","O"],thisStyle=(document.body||document.documentElement).style,Prop=prop.charAt(0).toUpperCase()+prop.slice(1);if(void 0!==thisStyle[prop])return prop;for(let i=0;i<prefixes.length;i++)if(void 0!==thisStyle[prefixes[i]+Prop])return prefixes[i]+Prop;return!1})("transform");return($el,val,position)=>{if(transform)if(0===val)$el.css(transform,"");else if("x"===getAxis(position)){const x="left"===position?val:-val;$el.css(transform,x?`translate3d(${x}px,0,0)`:"")}else{const y="top"===position?val:-val;$el.css(transform,y?`translate3d(0,${y}px,0)`:"")}else $el.css(position,val)}})(),deprecated=(what,instead,type)=>{console.warn("%cHC Off-canvas Nav:%c "+type+"%c '"+what+"'%c is now deprecated and will be removed. Use%c '"+instead+"'%c instead.","color: #fa253b","color: default","color: #5595c6","color: default","color: #5595c6","color: default")};let navCount=0;$.fn.extend({hcOffcanvasNav:function(options={}){if(!this.length)return this;const self=this,$body=$(document.body);options.side&&(deprecated("side","position","option"),options.position=options.side);let Settings=$.extend({},{maxWidth:1024,pushContent:!1,position:"left",levelOpen:"overlap",levelSpacing:40,levelTitles:!1,navTitle:null,navClass:"",disableBody:!0,closeOnClick:!0,customToggle:null,insertClose:!0,insertBack:!0,labelClose:"Close",labelBack:"Back"},options),UpdatedSettings=[];const navOpenClass="nav-open",checkForUpdate=options=>{if(!UpdatedSettings.length)return!1;let hasUpdated=!1;"string"==typeof options&&(options=[options]);let l=options.length;for(let i=0;i<l;i++)-1!==UpdatedSettings.indexOf(options[i])&&(hasUpdated=!0);return hasUpdated};return this.each(function(){const $this=$(this);if(!$this.find("ul").addBack("ul").length)return void console.error("%c! HC Offcanvas Nav:%c Menu must contain <ul> element.","color: #fa253b","color: default");const navUniqId=`hc-nav-${++navCount}`,Styles=(id=>{const $style=$(`<style id="${id}">`).appendTo($("head"));let rules={},media={};const parseRules=text=>(";"!==text.substr(-1)&&(text+=";"!==text.substr(-1)?";":""),text);return{reset:()=>{rules={},media={}},add:(selector,declarations,query)=>{selector=selector.trim(),declarations=declarations.trim(),query?(query=query.trim(),media[query]=media[query]||{},media[query][selector]=parseRules(declarations)):rules[selector]=parseRules(declarations)},remove:(selector,query)=>{selector=selector.trim(),query?(query=query.trim(),void 0!==media[query][selector]&&delete media[query][selector]):void 0!==rules[selector]&&delete rules[selector]},insert:()=>{let cssText="";for(let breakpoint in media){cssText+=`@media screen and (${breakpoint}) {\n`;for(let key in media[breakpoint])cssText+=`${key} { ${media[breakpoint][key]} }\n`;cssText+="}\n"}for(let key in rules)cssText+=`${key} { ${rules[key]} }\n`;$style.html(cssText)}}})(`hc-offcanvas-${navCount}-style`);let $toggle;$this.addClass(`hc-nav ${navUniqId}`);const $nav=$("<nav>").on("click",stopPropagation),$nav_container=$('<div class="nav-container">').appendTo($nav);let _transitionProperty,_transitionDuration,_transitionFunction,$push_content=null,Model={},_open=!1,_top=0,_containerWidth=0,_containerHeight=0,_closeLevelsTimeout=null,_indexes={};const _openLevels=[];Settings.customToggle?$toggle=$(Settings.customToggle).addClass(`hc-nav-trigger ${navUniqId}`).on("click",toggleNav):($toggle=$(`<a class="hc-nav-trigger ${navUniqId}"><span></span></a>`).on("click",toggleNav),$this.after($toggle));const calcNav=()=>{$nav_container.css("transition","none"),_containerWidth=$nav_container.outerWidth(),_containerHeight=$nav_container.outerHeight(),Styles.add(`.hc-offcanvas-nav.${navUniqId}.nav-position-left .nav-container`,`transform: translate3d(-${_containerWidth}px, 0, 0)`),Styles.add(`.hc-offcanvas-nav.${navUniqId}.nav-position-right .nav-container`,`transform: translate3d(${_containerWidth}px, 0, 0)`),Styles.add(`.hc-offcanvas-nav.${navUniqId}.nav-position-top .nav-container`,`transform: translate3d(0, -${_containerHeight}px, 0)`),Styles.add(`.hc-offcanvas-nav.${navUniqId}.nav-position-bottom .nav-container`,`transform: translate3d(0, ${_containerHeight}px, 0)`),Styles.insert(),$nav_container.css("transition",""),pageContentTransition()},pageContentTransition=()=>{_transitionProperty=$nav_container.css("transition-property").split(",")[0],_transitionDuration=(s=>parseFloat(s)*(/\ds$/.test(s)?1e3:1))($nav_container.css("transition-duration").split(",")[0]),_transitionFunction=$nav_container.css("transition-timing-function").split(",")[0],Settings.pushContent&&$push_content&&_transitionProperty&&Styles.add(getElementCssTag(Settings.pushContent),`transition: ${_transitionProperty} ${_transitionDuration}ms ${_transitionFunction}`),Styles.insert()},initNav=reinit=>{const toggleDisplay=$toggle.css("display"),mediaquery=!!Settings.maxWidth&&`max-width: ${Settings.maxWidth-1}px`;checkForUpdate("maxWidth")&&Styles.reset(),Styles.add(`.hc-offcanvas-nav.${navUniqId}`,"display: block",mediaquery),Styles.add(`.hc-nav-trigger.${navUniqId}`,`display: ${toggleDisplay&&"none"!==toggleDisplay?toggleDisplay:"block"}`,mediaquery),Styles.add(`.hc-nav.${navUniqId}`,"display: none",mediaquery),Styles.add(`.hc-offcanvas-nav.${navUniqId}.nav-levels-overlap.nav-position-left li.level-open > .nav-wrapper`,`transform: translate3d(-${Settings.levelSpacing}px,0,0)`,mediaquery),Styles.add(`.hc-offcanvas-nav.${navUniqId}.nav-levels-overlap.nav-position-right li.level-open > .nav-wrapper`,`transform: translate3d(${Settings.levelSpacing}px,0,0)`,mediaquery),Styles.add(`.hc-offcanvas-nav.${navUniqId}.nav-levels-overlap.nav-position-top li.level-open > .nav-wrapper`,`transform: translate3d(0,-${Settings.levelSpacing}px,0)`,mediaquery),Styles.add(`.hc-offcanvas-nav.${navUniqId}.nav-levels-overlap.nav-position-bottom li.level-open > .nav-wrapper`,`transform: translate3d(0,${Settings.levelSpacing}px,0)`,mediaquery),Styles.insert(),(!reinit||reinit&&checkForUpdate("pushContent"))&&("string"==typeof Settings.pushContent?($push_content=$(Settings.pushContent)).length||($push_content=null):$push_content=Settings.pushContent instanceof jQuery?Settings.pushContent:null),$nav_container.css("transition","none");const wasOpen=$nav.hasClass(navOpenClass),navClasses=["hc-offcanvas-nav",Settings.navClass||"",navUniqId,Settings.navClass||"","nav-levels-"+Settings.levelOpen||"none","nav-position-"+Settings.position,Settings.disableBody?"disable-body":"",isIos?"is-ios":"",isTouchDevice?"touch-device":"",wasOpen?navOpenClass:""].join(" ");$nav.off("click").attr("class","").addClass(navClasses),Settings.disableBody&&$nav.on("click",closeNav),reinit?calcNav():setTimeout(calcNav,1)},createModel=()=>{Model=function getModel($menu){const level=[];return $menu.each(function(){const $ul=$(this),nav={classes:$ul.attr("class"),items:[]};$ul.children("li").each(function(){const $li=$(this),$content=$li.children().filter(function(){const $this=$(this);return $this.is(":not(ul)")&&!$this.find("ul").length}).add($li.contents().filter(function(){return 3===this.nodeType&&this.nodeValue.trim()})),$nested_navs=$li.find("ul"),$subnav=$nested_navs.first().add($nested_navs.first().siblings("ul"));$subnav.length&&!$li.data("hc-uniqid")&&$li.data("hc-uniqid",ID()),nav.items.push({uniqid:$li.data("hc-uniqid"),classes:$li.attr("class"),$content:$content,subnav:$subnav.length?getModel($subnav):[]})}),level.push(nav)}),level}((()=>{const $ul=$this.find("ul").addBack("ul");return $ul.first().add($ul.first().siblings("ul"))})())},createNavDom=reinit=>{reinit&&($nav_container.empty(),_indexes={}),function createDom(menu,$container,level,title,backIndex){const $wrapper=$(`<div class="nav-wrapper nav-wrapper-${level}">`).appendTo($container).on("click",stopPropagation),$content=$('<div class="nav-content">').appendTo($wrapper);if(title&&$content.prepend(`<h2>${title}</h2>`),$.each(menu,(i_nav,nav)=>{const $menu=$("<ul>").addClass(nav.classes).appendTo($content);$.each(nav.items,(i_item,item)=>{const $item_content=item.$content;let $item_link=$item_content.find("a").addBack("a");const $a=$item_link.length?$item_link.clone(!0,!0).addClass("nav-item"):$('<span class="nav-item">').append($item_content.clone(!0,!0)).on("click",stopPropagation);$item_link.length&&$a.on("click",e=>{e.stopPropagation(),$item_link[0].click()}),"#"===$a.attr("href")&&$a.on("click",e=>{e.preventDefault()}),Settings.closeOnClick&&(!1===Settings.levelOpen||"none"===Settings.levelOpen?$a.filter("a").filter('[data-nav-close!="false"]').on("click",closeNav):$a.filter("a").filter('[data-nav-close!="false"]').filter(function(){const $this=$(this);return!item.subnav.length||$this.attr("href")&&"#"!==$this.attr("href").charAt(0)}).on("click",closeNav));const $item=$("<li>").addClass(item.classes).append($a);if($menu.append($item),Settings.levelSpacing&&("expand"===Settings.levelOpen||!1===Settings.levelOpen||"none"===Settings.levelOpen)){const indent=Settings.levelSpacing*level;indent&&$menu.css("text-indent",`${indent}px`)}if(item.subnav.length){const nextLevel=level+1,uniqid=item.uniqid;let nav_title="";if(_indexes[nextLevel]||(_indexes[nextLevel]=0),$item.addClass("nav-parent"),!1!==Settings.levelOpen&&"none"!==Settings.levelOpen){const index=_indexes[nextLevel],$next_span=$('<span class="nav-next">').appendTo($a),$next_label=$(`<label for="${navUniqId}-${nextLevel}-${index}">`).on("click",stopPropagation),$checkbox=$(`<input type="checkbox" id="${navUniqId}-${nextLevel}-${index}">`).attr("data-level",nextLevel).attr("data-index",index).val(uniqid).on("click",stopPropagation).on("change",checkboxChange);-1!==_openLevels.indexOf(uniqid)&&($wrapper.addClass("sub-level-open").on("click",()=>closeLevel(nextLevel,index)),$item.addClass("level-open"),$checkbox.prop("checked",!0)),$item.prepend($checkbox),nav_title=!0===Settings.levelTitles?$item_content.text().trim():"",$a.attr("href")&&"#"!==$a.attr("href").charAt(0)?$next_span.append($next_label):$a.prepend($next_label.on("click",function(){$(this).parent().trigger("click")}))}_indexes[nextLevel]++,createDom(item.subnav,$item,nextLevel,nav_title,_indexes[nextLevel]-1)}})}),level&&void 0!==backIndex&&!1!==Settings.insertBack&&"overlap"===Settings.levelOpen){const $children_menus=$content.children("ul");let $back=$(`<li class="nav-back"><a href="#">${Settings.labelBack||""}<span></span></a></li>`);$back.children("a").on("click",preventClick(()=>closeLevel(level,backIndex))),!0===Settings.insertBack?$children_menus.first().prepend($back):isNumeric(Settings.insertBack)&&insertAt($back,Settings.insertBack,$children_menus)}if(0===level&&!1!==Settings.insertClose){const $nav_ul=$content.children("ul"),$close=$(`<li class="nav-close"><a href="#">${Settings.labelClose||""}<span></span></a></li>`);$close.children("a").on("click",preventClick(closeNav)),!0===Settings.insertClose?$nav_ul.first().prepend($close):isNumeric(Settings.insertClose)&&insertAt($close,Settings.insertClose,$nav_ul.first().add($nav_ul.first().siblings("ul")))}}(Model,$nav_container,0,Settings.navTitle)};function checkboxChange(){const $checkbox=$(this),l=Number($checkbox.attr("data-level")),i=Number($checkbox.attr("data-index"));$checkbox.prop("checked")?function(l,i){const $checkbox=$(`#${navUniqId}-${l}-${i}`),uniqid=$checkbox.val(),$li=$checkbox.parent("li"),$wrap=$li.closest(".nav-wrapper");if($wrap.addClass("sub-level-open"),$li.addClass("level-open"),-1===_openLevels.indexOf(uniqid)&&_openLevels.push(uniqid),"overlap"===Settings.levelOpen&&($wrap.on("click",()=>closeLevel(l,i)),setTransform($nav_container,l*Settings.levelSpacing,Settings.position),$push_content)){const transformVal="x"===getAxis(Settings.position)?_containerWidth:_containerHeight;setTransform($push_content,transformVal+l*Settings.levelSpacing,Settings.position)}}(l,i):closeLevel(l,i)}function openNav(){if(_open=!0,$nav.css("visibility","visible").addClass(navOpenClass),$toggle.addClass("toggle-open"),"expand"===Settings.levelOpen&&_closeLevelsTimeout&&clearTimeout(_closeLevelsTimeout),Settings.disableBody&&(_top=$html.scrollTop()||$body.scrollTop(),hasScrollBar()&&$html.addClass("hc-nav-yscroll"),$body.addClass("hc-nav-open"),_top&&$body.css("top",-_top)),$push_content){const transformVal="x"===getAxis(Settings.position)?_containerWidth:_containerHeight;setTransform($push_content,transformVal,Settings.position)}setTimeout(()=>{self.trigger("open",$.extend({},Settings))},_transitionDuration+1)}function closeNav(){_open=!1,$push_content&&setTransform($push_content,0),$nav.removeClass(navOpenClass),$nav_container.removeAttr("style"),$toggle.removeClass("toggle-open"),"expand"===Settings.levelOpen&&-1!==["top","bottom"].indexOf(Settings.position)?closeLevel(0):!1!==Settings.levelOpen&&"none"!==Settings.levelOpen&&(_closeLevelsTimeout=setTimeout(()=>{closeLevel(0)},"expand"===Settings.levelOpen?_transitionDuration:0)),Settings.disableBody&&($body.removeClass("hc-nav-open"),$html.removeClass("hc-nav-yscroll"),_top&&($body.css("top","").scrollTop(_top),$html.scrollTop(_top),_top=0)),setTimeout(()=>{$nav.css("visibility",""),self.trigger("close.$",$.extend({},Settings)),self.trigger("close.once",$.extend({},Settings)).off("close.once")},_transitionDuration+1)}function toggleNav(e){e.preventDefault(),e.stopPropagation(),_open?closeNav():openNav()}initNav(),createModel(),createNavDom(),$body.append($nav);const _closeLevel=(l,i,transform)=>{const $checkbox=$(`#${navUniqId}-${l}-${i}`),uniqid=$checkbox.val(),$li=$checkbox.parent("li"),$wrap=$li.closest(".nav-wrapper");if($checkbox.prop("checked",!1),$wrap.removeClass("sub-level-open"),$li.removeClass("level-open"),-1!==_openLevels.indexOf(uniqid)&&_openLevels.splice(_openLevels.indexOf(uniqid),1),transform&&"overlap"===Settings.levelOpen&&($wrap.off("click").on("click",stopPropagation),setTransform($nav_container,(l-1)*Settings.levelSpacing,Settings.position),$push_content)){const transformVal="x"===getAxis(Settings.position)?_containerWidth:_containerHeight;setTransform($push_content,transformVal+(l-1)*Settings.levelSpacing,Settings.position)}};function closeLevel(l,i){for(let level=l;level<=Object.keys(_indexes).length;level++)if(level==l&&void 0!==i)_closeLevel(l,i,!0);else for(let index=0;index<_indexes[level];index++)_closeLevel(level,index,level==l)}self.settings=(option=>option?Settings[option]:Object.assign({},Settings)),self.isOpen=(()=>$nav.hasClass(navOpenClass)),self.open=openNav,self.close=closeNav,self.update=((options,updateDom)=>{if(UpdatedSettings=[],"object"==typeof options){for(let prop in options)Settings[prop]!==options[prop]&&UpdatedSettings.push(prop);Settings=$.extend({},Settings,options),initNav(!0),createNavDom(!0)}(!0===options||updateDom)&&(initNav(!0),createModel(),createNavDom(!0))})})}})}(jQuery,"undefined"!=typeof window?window:this);